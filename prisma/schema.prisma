generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Worker {
  id                String             @id @default(uuid())
  phone_number      String             @unique
  name              String?
  isActive          Boolean            @default(true)
  createdAt         DateTime           @default(now())
  attendanceRecords AttendanceRecord[]
}

model Site {
  id                String             @id @default(uuid())
  name              String
  location          String?
  attendanceRecords AttendanceRecord[]
}

model Swme {
  id                String    @id @default(uuid())
  instructionText   String    // The actual safety instruction text
}

model AttendanceRecord {
  id                String                @id @default(uuid())
  worker            Worker                @relation(fields: [workerId], references: [id])
  workerId          String
  site              Site                  @relation(fields: [siteId], references: [id])
  siteId            String
  timestamp         DateTime              @default(now())
  swme Swme[]  // Array of SafetyInstructions
}
